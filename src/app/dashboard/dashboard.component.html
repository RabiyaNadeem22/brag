
<div class="container">
  <header class="toolbar">
    <div class="toolbar-left">
      <span class="app-name">BragDoc</span>
    </div>
    <div class="toolbar-center">
      <span>User Dashboard</span>
    </div>
    <div class="toolbar-right">
      <button class="toolbar-button" (click)="edit()">Edit Profile</button>
      <button class="toolbar-button" (click)="logout()">Logout</button>
    </div>
  </header>

  <!-- Achievements List -->
  <div id="achievements-list" class="achievements-container">
    <div *ngIf="achievements.length > 0; else noAchievements">
      <div *ngFor="let achievement of achievements" class="achievement-card">
        <div class="achievement-header">
          <h3>{{ achievement.Title }}</h3>
          <td>{{ achievement.Date ? (achievement.Date | date: 'shortDate') : 'Invalid Date' }}</td>

          <div class="action-icons">
            <span (click)="updateAchievement(achievement)" class="edit-icon">✎</span>
            <span (click)="deleteAchievement(achievement.Id)" class="delete-icon">✖</span>
          </div>
        </div>
        <p [innerHTML]="sanitizeHtml(achievement.Description)"></p>
        <p><strong>Tags:</strong> {{ achievement.Tag }}</p>
      </div>
    </div>
</div>
<div>
    <ng-template #noAchievements>
      <p>No achievements found.</p>
    </ng-template>
  </div>

  <!-- Create New Achievement and Export Buttons -->
  <div class="actions">
    <button class="create-button" (click)="toggleNewAchievement()">Create New Achievement</button>
    <button class="export-button" style="margin-left: 20px;" (click)="exportAchievements()">Export to PDF</button>
  </div>

  <!-- New Achievement Form Modal -->
  <div *ngIf="showNewAchievement" class="form-modal">
    <div class="form-container">
      <h2>Create Achievement</h2>
      <label for="title">Title:</label>
      <input type="text" id="title" [(ngModel)]="newAchievement.Title" placeholder="Title">
      <label for="description">Description:</label>
      <editor [(ngModel)]="newAchievement.Description" apiKey="your-tiny-mce-api-key" [init]="editorConfig"></editor>
      <label for="date">Date:</label>
      <input type="date" id="date" [(ngModel)]="newAchievement.Date">
      <div class="filter-item">
        <label for="tag-select">Select a Tag:</label>
        <select id="tag-select" [(ngModel)]="selectedTag">
          <option value="">Select a tag</option>
          <option *ngFor="let tag of availableTags" [value]="tag">{{ tag }}</option>
        </select>
      </div>
      <div class="form-buttons">
        <button class="submit-button" (click)="createAchievement()">Submit</button>
        <button class="cancel-button" (click)="toggleNewAchievement()">Cancel</button>
      </div>
    </div>
  </div>

<!-- Edit Achievement Form Modal -->
<div *ngIf="showEditAchievement" class="form-modal">
  <div class="form-container">
    <h2>Edit Achievement</h2>
    <label for="edit-title">Title:</label>
    <input type="text" id="edit-title" [(ngModel)]="editAchievement.Title" placeholder="Title">
    <label for="edit-description">Description:</label>
    <editor [(ngModel)]="editAchievement.Description" apiKey="your-tiny-mce-api-key" [init]="editorConfig"></editor>
    <label for="edit-date">Date:</label>
    <input type="date" id="edit-date" [(ngModel)]="editAchievement.Date">
    <div class="filter-item">
      <label for="edit-tag-select">Select a Tag:</label>
      <select id="edit-tag-select" [(ngModel)]="selectedTag">
        <option value="">Select a tag</option>
        <option *ngFor="let tag of availableTags" [value]="tag">{{ tag }}</option>
      </select>
    </div>
    <div class="form-buttons">
      <button class="submit-button" (click)="saveEditAchievement()">Save</button>
      <button class="cancel-button" (click)="toggleEditAchievement()">Cancel</button>
    </div>
  </div>
</div>
</div>